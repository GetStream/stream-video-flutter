## Call State

The `Call` object manages the state of the call for you. You can use the `CallState` property to access information about the call, such as call ID, call status, call participants, call settings, and other relevant details.

To retrieve the `CallState` object, use the following code:

```dart
CallState callState = call.state.value;
```

Alternatively, you can subscribe to changes in the call state to update your UI or perform other actions based on the call's current state. Here's an example of how to subscribe to call state changes:

```dart
class CallContainer extends StatefulWidget {
  const CallContainer({
    super.key,
    required this.call,
  });

  final Call call;

  @override
  State<CallContainer> createState() => _CallContainerState();
}

class _CallContainerState extends State<CallContainer> {
  StreamSubscription<CallState>? _callStateSubscription;

  Call get call => widget.call;

  late CallState _callState;

  @override
  void initState() {
    super.initState();
    _callStateSubscription = call.state.listen((CallState callState) {
      setState(() {
        _callState = callState;
      });
    });
    _callState = call.state.value;
  }

  @override
  void dispose() {
    _callStateSubscription?.cancel();
    _callStateSubscription = null;
    super.dispose();
  }

  @override
  Widget build(BuildContext context) {
    final status = _callState.status;

    if (status is CallStatusIncoming && !status.acceptedByMe) {
      /// Show the ringing UI to the user
    }
  }
}
```

In this snippet, we are subscribing to the call state changes using the `listen()` method. Whenever the state changes, we update the UI by calling `setState()`. If the state is `CallStatusIncoming` and you haven't accepted the call yet, you can show the ringing UI.

## Understanding Call Status

The `CallStatus` property of the `CallState` object indicates the current state of the call. Depending on where you are in the call lifecycle, `CallStatus` can have the following possible values:

* `CallStatusIdle`: Indicates that there is no active call at the moment.
* `CallStatusCreated`: Indicates that the call exists or has been created on the server.
* `CallStatusJoining`: Indicates that the user has sent a request to join the call.
* `CallStatusJoined`: Indicates that the user has successfully joined the call.
* `CallStatusConnected`: Indicates that the user is connected to the call and is ready to send and receive tracks.
* `CallStatusIncoming`: Indicates that there's an incoming call, and you need to display an incoming call screen.
* `CallStatusOutgoing`: Indicates that the user is making an outgoing call, and you need to display an outgoing call screen.
* `CallStatusDrop`: Indicates that the call has ended, failed, or has been canceled.

By checking the `CallStatus` value in the `CallState` object, you can determine the current state of the call and adjust your UI accordingly.
